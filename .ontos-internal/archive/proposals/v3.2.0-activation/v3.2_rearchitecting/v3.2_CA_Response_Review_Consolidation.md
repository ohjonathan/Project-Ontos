---
id: v3_2_ca_response_consolidation
type: strategy
status: active
depends_on: [v3_2_re_architecture_ca_response]
concepts: [migration, architecture, review-consolidation]
---

# CA Response Review Consolidation

**Role:** Consolidator
**Phase:** Pre-A — Response Review Consolidation
**Version:** 3.2
**Subject:** Re-Architecture Support Proposal
**Date:** 2026-01-28

---

## 1. Verdict Summary

| Reviewer | Participated? | CA Response Quality | Ready for Spec? |
|----------|---------------|---------------------|-----------------|
| Claude (Alignment) | Yes | Thorough and well-reasoned | Yes (after revisions) |
| ChatGPT (Adversarial) | Yes | Adequate | No (needs one more revision) |
| Gemini (Peer) | Yes | — (Fresh review) | No (needs revision) |

**Consensus:** **1/3** say ready for spec (after revisions); **2/3** say needs revision first.

---

## 2. Issue Resolution Status

### Blocking Issues

| Issue | CA Decision | Claude | ChatGPT | Gemini | Status |
|-------|-------------|--------|---------|--------|--------|
| BLOCK-1: YAML without deps | Removed from scope (JSON only) | — | ✅ Adequately addressed | — | **Resolved** |
| BLOCK-2: Export rename | Subcommand approach (`export data`/`export claude`) | ✅ Adequately addressed | ✅ Adequately addressed (directionally) | — | **Resolved** (with spec details needed) |
| BLOCK-3: Heuristic extraction | Explicit fields instead; dropped `ontos decisions` | ✅ Adequately addressed | Partially addressed | — | **Partially Resolved** |

### Major Issues

| Issue | CA Decision | Accepted By | Disputed By | Status |
|-------|-------------|-------------|-------------|--------|
| Three commands too many | Reduced to 2 + alias | Claude | — | **Resolved** |
| No agent integration story | Will add workflow section | Claude (conditionally) | — | **Resolved** (pending delivery) |
| Scope creep | Reduced scope addresses | Claude | — | **Resolved** |
| Filter expression is scope creep | Dropped `--filter` | ChatGPT | — | **Resolved** |
| Migration classification too simplistic | Added `migration_status` override | — | ChatGPT | **Disputed** |
| Golden tests will churn | Added `--deterministic` | ChatGPT (conditionally) | — | **Needs spec detail** |
| Internal snapshot primitive | Will implement shared layer | Claude, ChatGPT | — | **Resolved** |

---

## 3. Pushback Summary

### Pushback 1: Migration Override Hides Inferred Truth

**CA Decision:** Add `migration_status: safe|review|rewrite` override field; if present, overrides graph-inferred classification.

**Reviewer Position:** ChatGPT pushes back — "override replaces inferred classification" is too blunt. Export/report should show **both** `inferred_migration_status` and `effective_migration_status`, warn on discrepancies, and consider a monotonic rule (overrides can only *increase* severity by default).

**Strength of Pushback:** **Strong**

**Recommendation:** **CA should revise.** The two-classification model (inferred + effective) is a minimal change that prevents override abuse and false confidence in "safe" classifications.

---

### Pushback 2: Nested Frontmatter Structures May Break Parser

**CA Decision:** Add `alternatives_rejected` as a list of dicts (option + reason).

**Reviewer Position:** ChatGPT flags that Ontos's frontmatter parser likely cannot handle YAML list-of-maps reliably without a proper YAML dependency. This reintroduces "YAML without YAML" failure mode.

**Strength of Pushback:** **Strong**

**Recommendation:** **CA should revise.** Constrain v3.2 decision fields to scalars and list-of-strings only:
- `decision_summary: <string>`
- `decision_rationale: <string | multiline>`
- `alternatives_rejected: ["Option A | reason", "Option B | reason"]` (pipe-delimited convention)

Defer structured alternatives to v3.3 `ontos-decision` blocks.

---

### Pushback 3: Frontmatter State Causes Git Merge Conflicts

**CA Decision:** Store `migration_status` override in file frontmatter.

**Reviewer Position:** Gemini raises that storing mutable state in source-controlled frontmatter causes merge conflicts when two developers run migration checks on different branches.

**Strength of Pushback:** **Moderate**

**Recommendation:** **CA should consider.** Options:
1. **Accept risk** — `migration_status` is author-declared, not tool-generated. Only changes when human explicitly sets it.
2. **Sidecar file** — Store migration state in `.ontos/migration-overrides.yaml` (git-ignored or separate).
3. **Clarify semantics** — Document that `migration_status` is a *manual override* by authors, not auto-updated by tools.

Clarification may be sufficient; sidecar adds complexity.

---

### Pushback 4: `export claude` Hardcodes Vendor Name

**CA Decision:** Use `export claude` subcommand.

**Reviewer Position:** Gemini flags hardcoding a vendor name into CLI verbs as an anti-pattern. Suggests `export context --preset=claude`.

**Strength of Pushback:** **Minor**

**Recommendation:** **CA decision stands.** This is existing behavior being moved to a subcommand. The rename to `--preset` is aesthetic and adds flag complexity. If/when Ontos supports other LLM context formats, they become `export openai`, `export custom`, etc.

---

### Pushback 5: `--deterministic` Flag Needs Precise Definition

**CA Decision:** Add `--deterministic` flag for testing.

**Reviewer Position:** ChatGPT accepts but requires concrete spec: stable document ordering, stable key ordering, stable dependency ordering, and treatment of volatile fields (`exported_at`, git commit, timestamps).

**Strength of Pushback:** **Moderate**

**Recommendation:** **CA should spec this.** Define exactly what `--deterministic` freezes/omits. Suggested: move volatile metadata under `provenance` object with option to omit in deterministic mode.

---

### Pushback 6: `-o` Flag Semantics Are Inconsistent

**CA Decision:** `export data -o snapshot.json` (file) vs `migrate -o ./migration/` (directory).

**Reviewer Position:** ChatGPT flags inconsistent `-o` semantics (file vs directory) as a trap.

**Strength of Pushback:** **Moderate**

**Recommendation:** **CA should revise.** Use `--out-dir` for `migrate` and reserve `-o/--output` for files. Add overwrite semantics (fail unless `--force`).

---

## 4. New Issues Raised

Issues identified in this round that weren't in the original reviews:

| New Issue | Raised By | Severity | Recommendation |
|-----------|-----------|----------|----------------|
| `migration_status_reason` field missing | ChatGPT | Low | Add free-text explanation field to prevent "random override spam" |
| Schema sprawl (3 new optional fields) | Claude | Low | Track cumulative complexity; consider `ontos doctor` hints |
| Agent workflow must be written before spec | Claude | Medium | Require agent workflow section before moving to spec |
| Deprecation sunset criteria missing | ChatGPT | Low | Spec hard date/version for alias removal (e.g., "removed in v3.4") |
| Snapshot schema undocumented | Gemini | Medium | Document `export data` schema for external consumers |
| `ontos migrate` vs `migration-report` discoverability | Gemini | Low | Consider alias to `ontos status` or `ontos check` |

---

## 5. Unresolved Questions

| Question | Status | Blocking Spec? |
|----------|--------|----------------|
| `ontos-decision` fenced blocks for v3.3? | Deferred | No |
| Typed dependency edges? | Deferred to v3.3 | No |
| Agent protocol definition? | Required before spec | **Yes** |
| MCP compatibility? | Deferred to v4.0 | No |
| Frontmatter parser capabilities for nested structures? | Needs verification | **Yes** (for decision fields) |

---

## 6. Final Assessment

**Proposal Status:** **Needs CA Revision**

The CA Response was thorough and made correct calls on the major blocking issues (dropping YAML, adopting subcommands, removing heuristics). However, reviewers collectively identified spec-level gaps that must be closed before implementation:

### Required Changes Before Spec:

- [ ] **Constrain decision fields to parseable structures** — `alternatives_rejected` as list-of-strings, not list-of-dicts
- [ ] **Two-classification model** — Export/report show both `inferred_migration_status` and `effective_migration_status`; warn on downgrades
- [ ] **Define `--deterministic` precisely** — Document ordering guarantees and volatile field handling
- [ ] **Fix `-o` semantics** — Use `--out-dir` for `migrate`, `-o` for files; define overwrite behavior
- [ ] **Write agent workflow section** — Before spec, not after
- [ ] **Add deprecation sunset date** — e.g., "Deprecated in v3.2, removed in v3.4"

### Optional Improvements (not blocking):

- [ ] Add `migration_status_reason` field for override justification
- [ ] Consider `ontos doctor` hints for missing `decision_summary` on strategy docs
- [ ] Document snapshot schema for external consumers

---

## 7. Recommended Next Step

**Revise CA Response to address the six required changes above, then re-submit for a single lightweight review (scope reduction warrants it).**

The proposal is close to ready. The issues are spec-level details, not architectural disagreements. One more revision pass should clear the path to implementation spec.

---

**Signed:** Consolidator
**Agent:** Antigravity, powered by Gemini 2.5 Pro
**Date:** 2026-01-28
