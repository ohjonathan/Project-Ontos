# Ontos v3.0 Strategy Decisions

**Status:** Final Decisions
**Date:** 2026-01-10
**Source:** 5-LLM Board Review with Founder Responses

> **Reading Guide:** This document contains final decisions only. For full deliberation, LLM recommendations, comparison tables, and dissent discussions, see [`V3.0-Board-Review-Analysis.md`](V3.0-Board-Review-Analysis.md).

---

## 1. Executive Summary

Ontos v3.0 is the **"Distribution & Polish"** release. The goal is to transform Ontos from a collection of repo-injected scripts into a properly distributed Python package (`pip install ontos`) while preserving the core philosophy: simplicity, lightweight, local-first, and "readable, not retrievable."

A 5-LLM review board analyzed the v3.0 proposal and reached consensus on 13 open questions. Key decisions: script reorganization is top priority, JSON output mode will be added, shim hooks will replace injected scripts, and MCP remains an optional layer (not primary interface). The daemon, export templates, and lazy loading are deferred to v4.

**v3.0 focuses on making what exists better distributed, not more complex.** v4.0 will be the "Agent-First" release.

---

## 2. v3.0 Theme & Scope

### Theme: "Distribution & Polish"

### What v3.0 IS About

- **pip distribution**: `pip install ontos` as primary installation method
- **Global CLI + local data**: Git-like model (tool is global, data is per-repo)
- **Script reorganization**: Break the 1,625-line "God Script" into modular structure
- **JSON output mode**: Machine-readable output for scripting and future MCP
- **Shim hooks**: Lightweight Git hooks that delegate to global CLI
- **Progressive complexity**: Auto-switch to summary mode for large projects
- **Zero-dep core**: No external dependencies for core functionality
- **Declarative config**: `.ontos.toml` replaces executable Python config

### What v3.0 is NOT About

- MCP as primary interface (deferred to v4)
- Daemon as default (deferred to v4)
- Export templates for CLAUDE.md/AGENTS.md (deferred to v4)
- Lazy loading with `ontos://` URIs (deferred to v4)
- Auto-configure MCP clients (deferred to v4)
- S3 archive backend (deferred indefinitely)
- Cross-repo federation (deferred indefinitely)

---

## 3. Final Decisions Table

| Q# | Question | Decision | Target | Priority |
|----|----------|----------|--------|----------|
| **Q1** | Add JSON output mode? | Add `--json` flag for machine-readable CLI output | v3.0 | HIGH |
| **Q2** | Export to CLAUDE.md/AGENTS.md? | Defer — template system for tool-specific exports | v4 | LOW |
| **Q3** | Implement context slicing? | Defer — lazy loading with `ontos://` URIs | v4 | LOW |
| **Q4** | Auto-detect file changes? | Use `git diff` for change detection, require confirmation | v3.0 | MEDIUM |
| **Q5** | Pin Ontos version in config? | Warn on version mismatch, no enforcement yet | v3.0 | LOW |
| **Q6** | How should Git hooks work? | Lightweight shim hooks that delegate to global `ontos` CLI | v3.0 | HIGH |
| **Q7** | Auto-configure MCP clients? | Documentation with copy-paste snippets only | v3.0 | LOW |
| **Q8** | Handle large projects gracefully? | Auto-summary mode for large projects, `--depth` flags | v3.0 | **CRITICAL** |
| **Q9** | Security model for MCP? | Defer — defense-in-depth when MCP ships | v3.x/v4 | MEDIUM |
| **Q10** | Add Pydantic as dependency? | Allow in MCP layer only via `pip install ontos[mcp]` | When MCP | LOW |
| **Q11** | How to reorganize scripts? | Explicit modular structure: core/, commands/, ui/, mcp/ | v3.0 | **TOP** |
| **Q12** | Python or Node for MCP? | Stay with Python for entire stack | v3.0 | — |
| **Q13** | JSON or Markdown primary? | Markdown primary, JSON as optional export | v3.0 | — |

**Consensus Strength:**
- 5/5 unanimous: Q1, Q6, Q11, Q12, Q13
- 4/5 strong: Q8, Q9, Q10
- 3/5 majority: Q2, Q5, Q7
- Split (resolved by founder): Q3, Q4

> *For full comparison tables showing all 5 LLM recommendations per question, see [Analysis §3: Open Questions Consolidation](V3.0-Board-Review-Analysis.md#3-open-questions-consolidation).*

---

## 4. v3.0 Deliverables (Prioritized)

### Tier 1: Must Do First (v3.0.0)

| Deliverable | Q# | Rationale |
|-------------|-----|-----------|
| **Script Reorganization** | Q11 | TOP PRIORITY — Enables everything else. Cannot distribute "God Script" via pip. |
| **Shim Hooks for Git** | Q6 | Part of pip distribution story. Replaces injected scripts. |
| **JSON Output Mode** | Q1 | Low effort, high value. Enables scripting and future MCP. |

### Tier 2: Core v3.0 Features

| Deliverable | Q# | Rationale |
|-------------|-----|-----------|
| **Progressive Complexity** | Q8 | CRITICAL for scalability. Auto-summary for large projects. |
| **Git-based Detection** | Q4 | No new deps. Uses `git diff` for change detection. Human-in-loop. |

### Tier 3: Nice to Have (v3.0)

| Deliverable | Q# | Rationale |
|-------------|-----|-----------|
| **Version Pinning** | Q5 | Warn-only initially. Revisit enforcement later. |
| **MCP Client Docs** | Q7 | Documentation with copy-paste JSON snippets. |

### Always True (Confirmed)

| Decision | Q# |
|----------|-----|
| Markdown primary output | Q13 |
| Stay with Python | Q12 |
| pip distribution | — |
| Global CLI + local data | — |
| Declarative `.ontos.toml` config | — |

> *For interdependencies and risk flags that informed prioritization, see [Analysis §4: Cross-Cutting Concerns](V3.0-Board-Review-Analysis.md#4-cross-cutting-concerns).*

---

## 5. v3.x Bridge Features

**Theme:** "Prepare for Protocol"

Features planned for later v3.x releases (after v3.0.0 stability):

| Feature | Notes |
|---------|-------|
| **Enhanced Security** | Basic defense-in-depth before v4 MCP launch |
| **Version Pinning Enforcement** | Upgrade from warn-only to enforcement |
| **MCP Layer (Optional)** | `pip install ontos[mcp]` with Pydantic |

---

## 6. v4.0 Future Scope

**Theme:** "Agent-First Release"

| Feature | Notes |
|---------|-------|
| **MCP as Primary Interface** | Agents as primary user persona |
| **Daemon Support** | Real-time file watching, sub-ms response |
| **Export Templates** | Tool-specific file generation (CLAUDE.md, AGENTS.md) |
| **Lazy Loading** | Context slicing with `ontos://` URIs |
| **Auto-Configure MCP Clients** | One-command MCP setup |
| **Full Defense-in-Depth Security** | Agentic security model |

**User Persona Shift:**
- v3.0: Both humans and agents
- v4.0: Agents primary, humans secondary

**Founder's Framing:**
> "Adding Daemon, adding MCP, adding this level of support — that's like building a SaaS product, a SaaS company. It's not really a Python package level anymore."

---

## 7. Reference Documents

| Document | Purpose |
|----------|---------|
| `V3.0-Board-Review-Analysis.md` | Full deliberation, all LLM recommendations, detailed dissent discussions |
| `V3.0-Validation-Maintainability-Technical-Analysis.md` | Analysis of existing validation logic (3,850 lines, 28 functions) |
| `V3.0-LLM-Review-Board-Synthesis.md` | Original Round 1 synthesis with founder decisions |

### Cross-Reference Map

| This Section | For More Context, See |
|--------------|----------------------|
| §3 Final Decisions | [Analysis §3](V3.0-Board-Review-Analysis.md#3-open-questions-consolidation): Full Q1-Q13 comparison tables with all LLM votes |
| §4 Deliverables | [Analysis §4](V3.0-Board-Review-Analysis.md#4-cross-cutting-concerns): Interdependencies, risk flags, priority reasoning |
| §5 v3.x Bridge | [Analysis §2](V3.0-Board-Review-Analysis.md#2-decision-review-summary): Dissent discussions on MCP/Daemon timing |
| §6 v4.0 Scope | [Analysis §2](V3.0-Board-Review-Analysis.md#2-decision-review-summary): Why MCP-primary and Daemon are v4 features |

---

*Document synthesized from 5-LLM Board Review with founder decisions. 2026-01-10.*
