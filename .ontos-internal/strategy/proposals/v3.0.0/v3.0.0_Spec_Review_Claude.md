# v3.0.0 Spec Review: Alignment Reviewer (Codex)

## Part 1: Decision Alignment Verification

### Section 2: Locked Decisions

| Decision | Cofounder Response Ref | Spec Addresses? | Correctly? | Notes |
|----------|-------------------------|----------------|------------|-------|
| `ontos agents` is P0 | §2.1, lines 25-27 | ✅ | ✅ | Agents spec is P0. |
| PyPI publishing is P0 | §2.1, lines 25-27 | ✅ | ✅ | PyPI workflow spec is P0. |
| `.cursorrules` fix is P0 | §2.1, lines 25-27 | ✅ | ✅ | Included via agents `--format=cursor` and `--all`. |
| AGENTS.md as default format | §2.1, lines 28-31 | ✅ | ✅ | Agents spec sets AGENTS.md default. |
| Init idempotency dropped | §2.1, lines 32-33 | ✅ | ✅ | No new idempotency work added beyond exit code change. |

### Section 3: Resolved Disagreements

| Resolution | Cofounder Response Ref | Spec Addresses? | Correctly? | Notes |
|------------|-------------------------|----------------|------------|-------|
| D1: Data cleanup now, validation tiers later | §3 D1, lines 48-63 | ✅ | ✅ | Data cleanup spec present; no validation tiers included. |
| D2: Exit 0 for already-initialized | §3 D2, lines 69-85 | ✅ | ✅ | Init exit code spec aligns. |
| D3: Top-5 commands in agents template | §3 D3, lines 91-116 | ✅ | ✅ | Quick Reference table included. |

### Section 4: Accepted Challenges

| Challenge Accepted | Cofounder Response Ref | Spec Reflects? | Notes |
|-------------------|-------------------------|----------------|-------|
| C1: 34 errors undermines trust → data cleanup | §4 C1 | ✅ | Data cleanup prerequisite included. |
| C2: Discoverability is part of agents feature | §4 C2 | ✅ | Top-5 commands in template. |
| C3: Single-source template system | §4 C3 | ✅ | AGENTS.md canonical; transform to .cursorrules. |

### Section 9: Final Scope

| Scope Item | Cofounder Response Ref | In Spec? | Correctly Scoped? | Notes |
|------------|-------------------------|----------|-------------------|-------|
| Prerequisite: PyPI account claim | §9, line 276 | N/A | N/A | Manual action; not in spec by design. |
| Prerequisite: Data cleanup | §9, lines 277-278 | ✅ | ✅ | Data cleanup spec included. |
| Feature 1: `ontos agents` | §9, line 283 | ✅ | ✅ | Agents spec. |
| Feature 2: `.cursorrules` via agents | §9, line 284 | ✅ | ✅ | `--format=cursor`/`--all`. |
| Feature 3: PyPI workflow | §9, line 285 | ✅ | ✅ | Publish workflow spec. |
| Feature 4: Init exit code | §9, line 286 | ✅ | ✅ | Exit code spec. |
| Feature 5: Auto-gen AGENTS on init | §9, line 287 | ✅ | ✅ | Init auto-gen spec. |
| Feature 6: Doctor staleness check | §9, line 288 | ✅ | ✅ | Doctor staleness spec. |

### Section 11: Spec Phase Instructions

| Instruction | Cofounder Response Ref | Spec Complies? | Notes |
|-------------|-------------------------|----------------|-------|
| §11.1: agents command spec | lines 341-353 | ✅ | Includes command, flags, template content, stats, staleness warning. |
| §11.2: PyPI publishing spec | lines 355-361 | ✅ | Workflow, tags, trusted publisher, TestPyPI. |
| §11.3: Init exit code spec | lines 363-368 | ✅ | One-line change specified. |
| §11.4: Data cleanup spec | lines 370-374 | ❌ | Spec verifies via `ontos map --strict`, not `ontos doctor` showing 0 validation errors as specified. |
| §11.5: Init auto-gen spec | lines 376-381 | ✅ | Auto-run agents; non-fatal on failure. |
| §11.6: Doctor staleness spec | lines 383-391 | ✅ | Warning message and sources covered. |

---

## Part 2: Deviation Analysis

### Deviations from Cofounder Response

| Deviation | Spec Says | Cofounder Response Says | Severity | Justified? |
|-----------|-----------|--------------------------|----------|------------|
| Data cleanup verification method | Verify via `ontos map --strict` and dependency audit | Verify via `ontos doctor` showing 0 validation errors | Minor | No |

### Unauthorized Scope Additions

| Addition | Spec Section | In Cofounder Response? | Should Remove? |
|----------|--------------|------------------------|----------------|
| None found | - | - | - |

### Missing Requirements

| Missing Item | Cofounder Response Ref | Impact |
|--------------|------------------------|--------|
| Golden test validates agents output is not committed as required (only optional) | §10 Success Criteria | Medium risk: success criteria may not be met or verified. |

---

## Part 3: Consistency Check

| Consistency Check | Status | Notes |
|-------------------|--------|-------|
| All 6 sub-specs use consistent structure | ✅ | Uniform sections and tables throughout. |
| File paths consistent across specs | ✅ | Paths match existing repo layout. |
| Error handling patterns consistent | ✅ | Return codes + warnings align across specs. |
| Test strategy patterns consistent | ✅ | Unit/integration/manual sections consistent. |
| Effort estimates plausible vs. scope | ✅ | Estimates match scope. |

---

## Part 4: Success Criteria Traceability

| Success Criterion | Cofounder Response Ref | Spec Element That Addresses It | Adequate? |
|-------------------|------------------------|-------------------------------|-----------|
| Fresh machine activation <5 min | §10, lines 325-326 | Init auto-gen spec (pip install + init leaves AGENTS.md) | ✅ |
| Golden test validates agents output | §10, lines 327-328 | Agents spec lists golden tests as optional | ❌ |
| 2+ LLMs follow activation | §10, lines 329-330 | Agents spec manual test includes 2 LLM onboarding | ✅ |

---

## Part 5: Issues Found

### Critical (Alignment Violations)

| # | Issue | Type | Why Critical |
|---|-------|------|--------------|
| A-C1 | None | - | - |

### Major (Alignment)

| # | Issue | Type | Recommendation |
|---|-------|------|----------------|
| A-M1 | Missing committed golden test for agents output | Missing | Add a required golden test baseline for AGENTS.md (and/or .cursorrules) or explicitly reconcile with success criteria. |

---

## Part 6: Verdict

**Alignment Status:** Minor Deviations

**Recommendation:** Request changes

**Blocking Issues:** 1

**Summary:**
The specs largely reflect the Cofounder Response decisions, including all P0 features, agents default format, single-source templates, and the init/doctor behaviors. Two alignment gaps remain: the data cleanup verification method is specified as `ontos map --strict` rather than `ontos doctor` validation clean, and the success criterion for a golden test validating agents output is only optional in the spec. Addressing those would bring full alignment.
