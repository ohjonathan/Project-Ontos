---
id: v2_9_implementation_plan_review_codex_v2
type: atom
status: draft
depends_on: [v2_9_implementation_plan]
concepts: [architecture, security, schema, adoption, release]
---

# Review: v2.9 Implementation Plan (Codex) — v2

**Reviewer:** Codex (GPT-5)
**Date:** 2025-12-22
**Scope:** Review of `v2.9_implementation_plan.md` v1.1.0
**Goal:** Provide thorough and honest feedback for Chief Architect updates.

---

## 1) Executive Summary — Key Findings

1. **Installer security is still not trust-anchored.** External checksums fix release coupling but not the trust chain. A compromised installer can still fetch attacker-controlled checksums.
2. **Install examples still use `main`.** This undermines integrity and reproducibility. Tag-pinned URLs should be the default in documentation and examples.
3. **Schema contract remains ambiguous.** Independent schema numbering was accepted, but inference is still central. Explicit schema definitions must govern; inference should be legacy-only.
4. **Curation validation semantics are not fully specified.** `--strict` vs `--curated` is mentioned but not defined for graph inclusion, staleness, and error handling.
5. **Deprecation warnings may still be invisible.** `FutureWarning` is better, but CLI visibility should be explicit.

---

## 2) Detailed Feedback & Improvements

### 2.1 Installer Trust Model

**Issue:** External `checksums.json` reduces coupling but does not establish a trust root. Attackers who can replace `install.py` can also replace checksums.

**Recommendations:**
- **Pin installer URLs to tags** in docs and examples: `.../raw/v2.9.0/install.py`.
- **Add explicit integrity language** in the plan: current model protects against tampered bundles only, not a full trust chain.
- **Document optional hash verification for install.py** in README/release notes.
- If signing is deferred, **add a v3.0 blocker note** rather than treating it as “nice-to-have.”

---

### 2.2 Schema Versioning Contract

**Issue:** Inference-based versioning blurs boundaries and weakens guarantees.

**Recommendations:**
- Define a **schema specification table** (version → fields + validation rules).
- Restrict inference to **legacy docs without `ontos_schema`** only.
- Explicitly document **future-version handling**: warn + skip strict validation or mark incompatible.

---

### 2.3 Curation Levels & Validation Semantics

**Issue:** Level 0/1 cannot be “valid” in the same sense as Level 2, but the plan does not define how tooling interprets them.

**Recommendations:**
- Clearly define `--strict` vs `--curated` behavior for:
  - dependency hierarchy enforcement
  - graph inclusion rules
  - staleness checks
  - exit code behavior in CI
- Ensure context map **labels curation levels** and defaults to excluding Level 0/1 from authoritative graphs unless `--curated` is passed.

---

### 2.4 Deprecation Warning Visibility

**Issue:** `FutureWarning` improves visibility but is still filterable. The plan does not require that CLI users will see warnings.

**Recommendations:**
- Add an explicit **CLI notice** for deprecated usage or enable warnings in `ontos.py` for Ontos modules.
- Require a test that asserts warning visibility in typical CLI runs.

---

### 2.5 Upgrade & Rollback Semantics

**Issue:** The plan mentions config merge but lacks operational rules.

**Recommendations:**
- Define a **backup and rollback** strategy for `--upgrade`.
- Clarify whether `ontos_config.py` is preserved, merged, or overwritten by default.
- Add `--target` staging install to reduce risk.

---

## 3) Missing Possibilities / Unaddressed Risks

- **GitHub API / rate limit failures:** installer should message clearly and support a fallback mode.
- **Frontmatter preservation:** migrations may reorder keys or remove comments; this risk should be acknowledged if `ruamel.yaml` is deferred.
- **Agent semantics for curation levels:** map should clarify how L0/L1 docs should be treated by agents.
- **Release workflow gates:** CI should fail if checksum placeholders or bundle metadata are missing.
- **Windows install path:** add PowerShell example; avoid Linux-only assumptions.

---

## 4) Concise Plan Changes Recommended

1. **Installer:** tag-pinned URLs, explicit integrity scope, optional hash verify note.
2. **Schema:** add version spec table; limit inference to legacy docs.
3. **Curation:** define strict vs curated semantics for graph and staleness.
4. **Warnings:** enforce visible notices in CLI, not just warnings.
5. **Upgrade:** backup/rollback + config preservation rules.
6. **Docs:** add Windows example and clarify offline limitations.

---

## 5) Closing Assessment

The v1.1.0 draft is materially improved but still under-specifies trust, schema contract, and curation semantics. These are core integrity risks because they affect adoption, security posture, and the reliability of Ontos as a shared context system. Tightening those sections should be a release requirement, not just a backlog note.

